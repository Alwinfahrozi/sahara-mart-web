========================================
ğŸš¨ MASALAH & SOLUSI ğŸš¨
========================================

MASALAH:
Database punya 2 kolom: 'total' DAN 'total_amount'
'total' = NOT NULL (causing error!)
'total_amount' = Already exists

ERROR:
"column total_amount already exists"
"null value in column total violates not-null"

SOLUSI:
Drop kolom 'total' yang lama
Keep 'total_amount' (sudah ada)

========================================
JALANKAN SQL INI:
========================================

File: database/FIX_SEKARANG.sql

LANGKAH:
1. Buka: https://supabase.com/dashboard
2. Select: Sahara Mart
3. Click: SQL Editor â†’ New Query
4. Copy: ISI database/FIX_SEKARANG.sql
5. Paste & Run
6. Tunggu sampai selesai
7. Settings â†’ API â†’ Reload schema âš ï¸
8. node scripts/verify-database.js

EXPECTED:
âœ… Dropped old column: total
âœ… Added unique constraint
âœ… Added foreign key
âœ… Test order number: ORD-20260113-XXX
âœ… All checks passed!

========================================
SETELAH ITU:
========================================

npm run dev
â†’ Create order
â†’ Check WhatsApp (HARUS ADA order number!)
â†’ Check admin panel (order HARUS muncul!)
â†’ Done! ğŸ‰

========================================
TIME: 5 MENIT
========================================

Yang dilakukan script:
âœ… Drop kolom 'total' (yang NOT NULL)
âœ… Keep 'total_amount' (yang sudah ada)
âœ… Add semua missing columns
âœ… Create function generate_order_number()
âœ… Create indexes
âœ… Create triggers
âœ… Verification queries

========================================
JANGAN LUPA:
========================================

âš ï¸ REFRESH SCHEMA CACHE! âš ï¸
Settings â†’ API â†’ Reload schema

Tanpa ini, error masih akan muncul!

========================================
